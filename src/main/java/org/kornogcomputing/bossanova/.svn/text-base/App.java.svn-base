package org.kornogcomputing.bossanova;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.File;
import java.io.FileNotFoundException;
import java.util.Calendar;
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.xml.bind.JAXBException;

import org.kornogcomputing.bossanova.exception.NoComponentNameException;
import org.kornogcomputing.bossanova.gui.BNPanel;
import org.kornogcomputing.bossanova.gui.XmlReader;
import org.kornogcomputing.bossanova.utils.BNLevel;


/**
 * test for bossanova
 *
 */
public class App implements ActionListener {
	public BNPanel panelInfo;
	BNPanel panel;
	public static void main( String[] args ) {
		App app = new App();
		app.test();
	}

	/**
	 * build panel info
	 * @return built panel
	 */
	protected void test() {
		JFrame frame = new JFrame();


		XmlReader reader = new XmlReader(this);
		try {
			reader.writeXml();
		} catch (JAXBException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
//		Calendar gc = Calendar.getInstance();
//		gc.add(Calendar.DATE, -6);
//		BeanTest bt = new BeanTest("tottto", 2, "herve", gc.getTime());
//		try {
//			panel = reader.read(new File("BeanTest.xml"));
//		} catch (JAXBException e) {			
//			e.printStackTrace();
//		} catch (FileNotFoundException e) {
//			// TODO Auto-generated catch block
//			e.printStackTrace();
//		} catch (NoComponentNameException e) {
//			// TODO Auto-generated catch block
//			e.printStackTrace();
//		}
//		panel.modelToPresentation(bt);
//		panel.makeCachableButtonVisible(false);
//		frame.add(panel);
//		frame.setSize(800, 600);
//		frame.setVisible(true);


	}

	@Override
	public void actionPerformed(ActionEvent e) {
		
		final Action action = Action.valueOfByName(e.getActionCommand());
		switch (action) {
		case Cancel:
			panel.setLevel(BNLevel.Level0);
			break;
		case Delete:
			panel.setLevel(BNLevel.Level1);
			break;
		case ToAction:
			JOptionPane.showMessageDialog(null, "Hello Folks"
					, "Hello",
					JOptionPane.INFORMATION_MESSAGE);
			panel.setLevel(BNLevel.Level2);
			break;
		case Validate:
			if (panel.isValidable()) {
				BeanTest bt = (BeanTest) panel.presentationToModel();
				System.out.println(bt);
			} else {
				System.out.println("invalide");
			}
			break;
		default:
			break;
		}
		panel.levelling();
		panel.makeCachableButtonVisible(false);
	}
}
